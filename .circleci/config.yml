version: 2.1
jobs:
      build:
            working_directory: ~/appishere
            docker:
                  - image: circleci/node:12.9.0
            steps:
                  - checkout
                  - run:
                          name: update-npm
                          command: "sudo npm install -g npm@latest"
                  - restore_cache:
                          key: dependency-cache-{{ checksum "package-lock.json" }}
                  - run:
                          name: install-npm-wee
                          command: npm ci
                  - save_cache:
                          key: dependency-cache-{{ checksum "package-lock.json" }}
                          paths:
                                - ./node_modules
                  - run:
                          name: test
                          command: npm test                
                  - store_artifacts:
                          path: coverage                          
                  - store_test_results:
                          path: coverage/clover.xml
